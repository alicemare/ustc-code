.Orig x3000
INIT_CODE
LEA R6, #-1
ADD R5, R6, #0
ADD R6, R6, R6
ADD R6, R6, R6
ADD R6, R6, R5
ADD R6, R6, #-1
ADD R5, R5, R5
ADD R5, R6, #0
LD R4, GLOBAL_DATA_POINTER
LD R7, GLOBAL_MAIN_POINTER
jsrr R7
HALT

GLOBAL_DATA_POINTER .FILL GLOBAL_DATA_START
GLOBAL_MAIN_POINTER .FILL main
;;;;;;;;;;;;;;;;;;;;;;;;;;;;main;;;;;;;;;;;;;;;;;;;;;;;;;;;;
main
ADD R6, R6, #-2
STR R7, R6, #0
ADD R6, R6, #-1
STR R5, R6, #0
ADD R5, R6, #-1

ADD R6, R6, #-3
ADD R7, R4, #13
ldr R7, R7, #0
str R7, R5, #0
ADD R0, R4, #1
LDR R0, R0, #0
JMP R0
lc3_L3_gcd_stein
ADD R7, R4, #12
ldr R7, R7, #0
ldr R3, R5, #0
add R3, R3, R7
str R3, R5, #0
ldr R3, R5, #4
;RSHI
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R7, R6, #0
AND R0, R0, #0
ADD R0, R0, #1
ADD R7, R7, #0
BRz L24
L25
ADD R0, R0, R0
ADD R7, R7, #-1
BRnp L25
L24
ADD R7, R0, #0
ADD R7, R7, #0
BRz L26
ADD R6, R6, #-1
STR R3, R6, #0
ADD R6, R6, #-1
STR R7, R6, #0
AND R0, R0, #0
ADD R3, R3, #0
BRzp L27
NOT R3, R3
ADD R3, R3, #1
L27
ADD R7, R7, #0
BRn L28
NOT R7, R7
ADD R7, R7, #1
L28
ADD R3, R3, R7
BRn L29
ADD R0, R0, #1
BR L28
L29
LDR R7, R6, #0
ADD R6, R6, #1
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R7, #0
BRzp L30
ADD R3, R3, #0
BRzp L31
BRn L26
L30
ADD R3, R3, #0
BRzp L26
L31
NOT R0, R0
ADD R0, R0, #1
L26
LDR R7, R6, #0
ADD R6, R6, #1
ADD R3, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
str R3, R5, #4
ldr R3, R5, #5
;RSHI
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R7, R6, #0
AND R0, R0, #0
ADD R0, R0, #1
ADD R7, R7, #0
BRz L32
L33
ADD R0, R0, R0
ADD R7, R7, #-1
BRnp L33
L32
ADD R7, R0, #0
ADD R7, R7, #0
BRz L34
ADD R6, R6, #-1
STR R3, R6, #0
ADD R6, R6, #-1
STR R7, R6, #0
AND R0, R0, #0
ADD R3, R3, #0
BRzp L35
NOT R3, R3
ADD R3, R3, #1
L35
ADD R7, R7, #0
BRn L36
NOT R7, R7
ADD R7, R7, #1
L36
ADD R3, R3, R7
BRn L37
ADD R0, R0, #1
BR L36
L37
LDR R7, R6, #0
ADD R6, R6, #1
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R7, #0
BRzp L38
ADD R3, R3, #0
BRzp L39
BRn L34
L38
ADD R3, R3, #0
BRzp L34
L39
NOT R0, R0
ADD R0, R0, #1
L34
LDR R7, R6, #0
ADD R6, R6, #1
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
str R7, R5, #5
lc3_L4_gcd_stein
ADD R7, R4, #12
ldr R7, R7, #0
str R7, R5, #-1
ADD R3, R4, #13
ldr R3, R3, #0
ldr R2, R5, #4
and R2, R2, R7
ADD R7, R3, #0
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R2
BRz L40
ADD R7, R4, #2
LDR R7, R7, #0
jmp R7
L40
ldr R7, R5, #5
ldr R2, R5, #-1
and R7, R7, R2
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRnp L41
ADD R7, R4, #0
LDR R7, R7, #0
jmp R7
L41
lc3_L7_gcd_stein
ADD R0, R4, #4
LDR R0, R0, #0
JMP R0
lc3_L8_gcd_stein
ldr R7, R5, #4
ADD R3, R4, #12
ldr R3, R3, #0
;RSHI
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R0, R0, #1
ADD R3, R3, #0
BRz L42
L43
ADD R0, R0, R0
ADD R3, R3, #-1
BRnp L43
L42
ADD R3, R0, #0
ADD R3, R3, #0
BRz L44
ADD R6, R6, #-1
STR R7, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R7, R7, #0
BRzp L45
NOT R7, R7
ADD R7, R7, #1
L45
ADD R3, R3, #0
BRn L46
NOT R3, R3
ADD R3, R3, #1
L46
ADD R7, R7, R3
BRn L47
ADD R0, R0, #1
BR L46
L47
LDR R3, R6, #0
ADD R6, R6, #1
LDR R7, R6, #0
ADD R6, R6, #1
ADD R3, R3, #0
BRzp L48
ADD R7, R7, #0
BRzp L49
BRn L44
L48
ADD R7, R7, #0
BRzp L44
L49
NOT R0, R0
ADD R0, R0, #1
L44
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
str R7, R5, #4
lc3_L9_gcd_stein
ldr R7, R5, #4
ADD R3, R4, #12
ldr R3, R3, #0
and R7, R7, R3
ADD R3, R4, #13
ldr R3, R3, #0
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRnp L50
ADD R7, R4, #3
LDR R7, R7, #0
jmp R7
L50
ADD R0, R4, #6
LDR R0, R0, #0
JMP R0
lc3_L11_gcd_stein
ldr R7, R5, #5
ADD R3, R4, #12
ldr R3, R3, #0
;RSHI
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R0, R0, #1
ADD R3, R3, #0
BRz L51
L52
ADD R0, R0, R0
ADD R3, R3, #-1
BRnp L52
L51
ADD R3, R0, #0
ADD R3, R3, #0
BRz L53
ADD R6, R6, #-1
STR R7, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R7, R7, #0
BRzp L54
NOT R7, R7
ADD R7, R7, #1
L54
ADD R3, R3, #0
BRn L55
NOT R3, R3
ADD R3, R3, #1
L55
ADD R7, R7, R3
BRn L56
ADD R0, R0, #1
BR L55
L56
LDR R3, R6, #0
ADD R6, R6, #1
LDR R7, R6, #0
ADD R6, R6, #1
ADD R3, R3, #0
BRzp L57
ADD R7, R7, #0
BRzp L58
BRn L53
L57
ADD R7, R7, #0
BRzp L53
L58
NOT R0, R0
ADD R0, R0, #1
L53
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
str R7, R5, #5
lc3_L12_gcd_stein
ldr R7, R5, #5
ADD R3, R4, #12
ldr R3, R3, #0
and R7, R7, R3
ADD R3, R4, #13
ldr R3, R3, #0
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRnp L59
ADD R7, R4, #5
LDR R7, R7, #0
jmp R7
L59
ldr R7, R5, #4
ldr R3, R5, #5
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRp L60
ADD R7, R4, #10
LDR R7, R7, #0
jmp R7
L60
ldr R7, R5, #4
str R7, R5, #-2
ldr R7, R5, #5
str R7, R5, #4
ldr R7, R5, #-2
str R7, R5, #5
ADD R0, R4, #10
LDR R0, R0, #0
JMP R0
lc3_L19_gcd_stein
ldr R7, R5, #4
ADD R3, R4, #12
ldr R3, R3, #0
;RSHI
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R0, R0, #1
ADD R3, R3, #0
BRz L61
L62
ADD R0, R0, R0
ADD R3, R3, #-1
BRnp L62
L61
ADD R3, R0, #0
ADD R3, R3, #0
BRz L63
ADD R6, R6, #-1
STR R7, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R7, R7, #0
BRzp L64
NOT R7, R7
ADD R7, R7, #1
L64
ADD R3, R3, #0
BRn L65
NOT R3, R3
ADD R3, R3, #1
L65
ADD R7, R7, R3
BRn L66
ADD R0, R0, #1
BR L65
L66
LDR R3, R6, #0
ADD R6, R6, #1
LDR R7, R6, #0
ADD R6, R6, #1
ADD R3, R3, #0
BRzp L67
ADD R7, R7, #0
BRzp L68
BRn L63
L67
ADD R7, R7, #0
BRzp L63
L68
NOT R0, R0
ADD R0, R0, #1
L63
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
str R7, R5, #4
lc3_L20_gcd_stein
ldr R7, R5, #4
ADD R3, R4, #12
ldr R3, R3, #0
and R7, R7, R3
ADD R3, R4, #13
ldr R3, R3, #0
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRnp L69
ADD R7, R4, #7
LDR R7, R7, #0
jmp R7
L69
ldr R7, R5, #4
ldr R3, R5, #5
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRp L70
ADD R7, R4, #9
LDR R7, R7, #0
jmp R7
L70
ldr R7, R5, #4
str R7, R5, #-2
ldr R7, R5, #5
str R7, R5, #4
ldr R7, R5, #-2
str R7, R5, #5
lc3_L22_gcd_stein
lc3_L17_gcd_stein
ldr R7, R5, #4
ldr R3, R5, #5
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
NOT R3, R3
ADD R3, R3, #1
ADD R0, R7, R3
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
ADD R3, R4, #12
ldr R3, R3, #0
;RSHI
ADD R6, R6, #-1
STR R0, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R0, R0, #1
ADD R3, R3, #0
BRz L71
L72
ADD R0, R0, R0
ADD R3, R3, #-1
BRnp L72
L71
ADD R3, R0, #0
ADD R3, R3, #0
BRz L73
ADD R6, R6, #-1
STR R7, R6, #0
ADD R6, R6, #-1
STR R3, R6, #0
AND R0, R0, #0
ADD R7, R7, #0
BRzp L74
NOT R7, R7
ADD R7, R7, #1
L74
ADD R3, R3, #0
BRn L75
NOT R3, R3
ADD R3, R3, #1
L75
ADD R7, R7, R3
BRn L76
ADD R0, R0, #1
BR L75
L76
LDR R3, R6, #0
ADD R6, R6, #1
LDR R7, R6, #0
ADD R6, R6, #1
ADD R3, R3, #0
BRzp L77
ADD R7, R7, #0
BRzp L78
BRn L73
L77
ADD R7, R7, #0
BRzp L73
L78
NOT R0, R0
ADD R0, R0, #1
L73
LDR R3, R6, #0
ADD R6, R6, #1
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
str R7, R5, #4
ADD R3, R4, #13
ldr R3, R3, #0
NOT R7, R7
ADD R7, R7, #1
ADD R7, R7, R3
BRz L79
ADD R7, R4, #8
LDR R7, R7, #0
jmp R7
L79
ldr R7, R5, #5
ldr R3, R5, #0
;LSH
ADD R6, R6, #-1
STR R0, R6, #0
ADD R0, R7, #0
ADD R3, R3, #0
BRz L81
L80
ADD R0, R0, R0
ADD R3, R3, #-1
BRnp L80
L81
ADD R7, R0, #0
LDR R0, R6, #0
ADD R6, R6, #1
lc3_L1_gcd_stein
STR R7, R5, #3
ADD R6, R5, #1
LDR R5, R6, #0
ADD R6, R6, #1
LDR R7, R6, #0
ADD R6, R6, #1
RET


GLOBAL_DATA_START
L3_gcd_stein .FILL lc3_L3_gcd_stein
L4_gcd_stein .FILL lc3_L4_gcd_stein
L7_gcd_stein .FILL lc3_L7_gcd_stein
L8_gcd_stein .FILL lc3_L8_gcd_stein
L9_gcd_stein .FILL lc3_L9_gcd_stein
L11_gcd_stein .FILL lc3_L11_gcd_stein
L12_gcd_stein .FILL lc3_L12_gcd_stein
L19_gcd_stein .FILL lc3_L19_gcd_stein
L20_gcd_stein .FILL lc3_L20_gcd_stein
L22_gcd_stein .FILL lc3_L22_gcd_stein
L17_gcd_stein .FILL lc3_L17_gcd_stein
L1_gcd_stein .FILL lc3_L1_gcd_stein
L6_gcd_stein .FILL #1
L2_gcd_stein .FILL #0
.END
